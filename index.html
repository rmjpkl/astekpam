<HTML lang="en" data-bs-theme="light">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>LAPORAN | ASIKADIMBA</title>
        <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css"
      rel="stylesheet"
    />
        <style type="text/css">
            #send_form {
                color: #fff;
                background: #4e4e4e;
                text-decoration: none;
                display: inline-block;
                padding: 10px 25px;
                border-radius: .3rem;
                font-weight: 700;
                letter-spacing: .5px;
                font-size: 15px;
                float: right;
            }

        </style>

        <script src='https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js'></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

        <!-- script css untuk map -->
        <script>
            function getLocation() {
              if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition);
              } else { 
                alert("Geolocation tidak didukung oleh browser ini.");
              }
            }
            
            function showPosition(position) {
              var latitude = position.coords.latitude;
              var longitude = position.coords.longitude;
              document.getElementById('latitude').value = latitude;
              document.getElementById('longitude').value = longitude;
              generateMapLink();
            }
            
            function generateMapLink() {
              var longitude = document.getElementById('longitude').value;
              var latitude = document.getElementById('latitude').value;
              var googleMapLink = "https://www.google.com/maps?q=" + latitude + "," + longitude;
              document.getElementById('dimana').value = googleMapLink;
            }
            </script>
    </head>
    
    <div class="container-sm">
           <body onload="getLocation()">
            <h1>LAPORAN </h1>
            <form>
                
                <fieldset class="form-group border p-3">
                    
                    <div class="mb-3">
                        <label class="form-label">Judul</label>
                        <input type="text" class="form-control" id="judul"  required="" placeholder="Nama Kegiatan/kejadian">
                    </div>

               <div class="mb-3">
                    <label for="tanggal" class="form-label">Pilih Tanggal</label>
                    <input type="text" class="form-control" id="tanggal" name="tanggal" placeholder="klik unutk memilih tanggal">
                    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
                    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/locales/bootstrap-datepicker.id.min.js"></script>
                    <script>
                        $(document).ready(function(){
                        $('#tanggal').datepicker({
                            format: 'DD , dd M yyyy',
                            language: 'id', 
                            autoclose: true
                        }); 
                        $('#tanggal').datepicker('setDate', new Date())                      
                        });
                    </script>
                </div>

                
                <div class="mb-3">
                    <label class="form-label">Nama Pelapor</label>
                    <input type="text" class="form-control" id="namaPelaporan"  required="" placeholder="Siapa yang melaporkan">
                </div>
                

                <div class="mb-3">
                    <input type="text" id="longitude" name="longitude" readonly hidden>
                    <input type="text" id="latitude" name="latitude" readonly hidden>
                     <label class="form-label">Dimana</label>
                    <input type="text" class="form-control" id="dimana"  required="" placeholder="tempat kejadian" readonly>
                </div>

             <div class="mb-3">
                <label for="bagaimana" class="form-label">Bagaimana</label>
                <textarea class="form-control" id="bagaimana" required placeholder="Keterangan Kejadian" style="width: 100%; height:200px;" contenteditable="true" ></textarea>
            </div>
            
            



                <a class="send_form" id="send_form" href="javascript:void" type="submit" title="Send to Whatsapp"> <i class="fa fa-paper-plane"></i>  Kirim</a>
                </fieldset>
    
            </form>
      
    </div>
    
    <script type="text/javascript">
        //<![CDATA[
        $(document).on('click', '.send_form', function () {
            var input_blanter = document.getElementById('judul');
            /* Whatsapp Settings */
            var walink = 'https://web.whatsapp.com/send',
                phone = '',
                walink2 = 'Halo saya ingin Memesan ',
                text_yes = 'Terkirim.',
                text_no = 'Isi semua Formulir lalu klik Send.';
    
            /* Smartphone Support */
            if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
                var walink = 'whatsapp://send';
            }
    
            if ("" != input_blanter.value) {
    
                /* Call Input Form */
                var input_judul=$("#judul").val(),
                input_tanggal=$("#tanggal ").val(),
                input_namaPelaporan=$("#namaPelaporan").val(),
                input_dimana=$("#dimana").val(),
                input_bagaimana=$("#bagaimana").val();
                
    
    /* Cek kemudian print di url whatsapp api */
    
                /* Final Whatsapp URL */
                var blanter_whatsapp = walink + '?phone=' + phone + '&text=' + '%0A%0A' +
                    '*Izin melaporakan*' + '%0A' +
                    '```Kegiatan :' + input_judul + '%0A' +
                    'Waktu    :' + input_tanggal + '%0A' +
                    'Lokasi   :' + '%0A' +
                    input_dimana + '%0A' +
                    'Pengirim :' + input_namaPelaporan + '%0A' +
                    'Uraian   :```' + '%0A' +
                    input_bagaimana + '%0A' +
                    '' + '%0A';
    
                /* Whatsapp Window Open */
                window.open(blanter_whatsapp, '_blank');
                document.getElementById("text-info").innerHTML = '<span class="yes">' + text_yes + '</span>';
            } else {
                document.getElementById("text-info").innerHTML = '<span class="no">' + text_no + '</span>';
            }
        });
    //]]>
    </script>
    
    </body>
    
    </HTML>